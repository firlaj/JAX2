var JAX=function(a,b){if(a&&a.jaxNodeType)return a;if("string"==typeof a){if(1==arguments.length)b=document;else if(1<arguments.length&&b)b=b.jaxNodeType?b.node():b;else return new JAX.NullNode;var c=b.querySelector(a),d=c?c.nodeType:-1}else a&&"object"==typeof a&&a.nodeType?(d=a.nodeType,c=a):(d=-1,c=null);switch(d){case 1:return new JAX.Element(c);case 3:case 8:return new JAX.TextNode(c);case 9:return new JAX.DocumentNode(c);case 11:return new JAX.DocumentFragmentNode(c)}return new JAX.NullNode};
JAX.all=function(a,b){if("string"==typeof a){if(1==arguments.length)b=document;else if(1<arguments.length&&b)b=b.jaxNodeType?b.node():b;else return new JAX.NodeArray([]);for(var c=b.querySelectorAll(a),d=Array(c.length),g=0,e=c.length;g<e;g++)d[g]=JAX(c[g]);return new JAX.NodeArray(d)}return a&&"object"==typeof a&&a.nodeType?new JAX.NodeArray(JAX(a)):a&&a.jaxNodeType?new JAX.NodeArray(a):JAX.NodeArray(null)};
JAX.make=function(a,b,c,d){b=b||{};c=c||{};d=d||document;if(!a||"string"!=typeof a)throw Error("First argument must be string.");if("object"!=typeof b)throw Error("Second argument must be associative array.");if("object"!=typeof c)throw Error("Third argument must be associative array.");if("object"!=typeof d||!d.nodeType&&-1==[9,11].indexOf(d.nodeType))throw Error("Fourth argument must be document element.");var g=a.match(/^([a-zA-Z]+[a-zA-Z0-9]*)/g)||[];if(1==g.length)a=a.substring(g[0].length,a.length);
else throw Error("Tagname must be first in element definition");for(var e="",h=0,r=a.length;h<r;h++){var k=a[h];"#"==k?(e="id",b.id=""):"."==k?(e="className",b.className=b.className?b.className+" ":""):e&&(b[e]+=k)}a=d.createElement(g);for(var n in b)a[n]=b[n];for(n in c)a.style[n]=c[n];return new JAX.Element(a)};JAX.makeText=function(a,b){return new JAX.TextNode((b||document).createTextNode(a))};
JAX.getTypeOf=function(a){if("number"==typeof a)return"number";if("string"==typeof a)return"string";if("undefined"==typeof a)return"undefined";if("function"==typeof a)return"function";if(!0===a||!1===a)return"boolean";if(null===a)return"null";a=Object.prototype.toString.call(a);return"[object Array]"==a?"array":"[object Date]"==a?"date":"object"};JAX.IListening=JAK.ClassMaker.makeInterface({NAME:"JAX.IListening",VERSION:"1.0"});JAX.IListening._events=[];
JAX.IListening.prototype.listen=function(a,b,c,d){c||(c=b,b=window);"string"!=typeof a&&(a+="",JAX.Report.error("For first argument I expected string.",this._node));if("object"!=typeof b&&"function"!=typeof b)throw Error("For second argument I expected referred object or binded function");if("string"!=typeof c&&"function"!=typeof c)throw Error("For second argument I expected string or function");if("string"==typeof c){c=b[c];if(!c)throw Error("Given method in second argument was not found in referred object given in third argument");
c=c.bind(b)}else"function"==typeof c&&b?c=c.bind(b):"function"==typeof b&&(c=b);b=function(a,b){c(new JAX.Event(a),d)};var g=JAK.Events.addListener(this._node,a,b);b=new JAX.Listener(this,g,a,b);for(var g=JAX.IListening._events,e=-1,h=0,r=g.length;h<r;h++)if(g[h].node==this._node){e=h;break}-1==e?(e={node:this._node,events:{}},g.push(e)):e=g[e];e.events[a]?e.events[a].push(b):e.events[a]=[b];return b};
JAX.IListening.prototype.stopListening=function(a){for(var b=JAX.IListening._events,c=-1,d=0,g=b.length;d<g;d++)if(b[d].node==this._node){c=d;break}if(-1==c)return this;d=b[c];if(!arguments.length){var d=d.events,e;for(e in d)this._destroyEvents(d[e]);b.splice(c,1);return this}if("string"==typeof a)return e=d.events[a],this._destroyEvents(e),delete b[c].events[a],this;if(a instanceof JAX.Listener)return e=d.events[a.type()],b=e.indexOf(a),-1<b&&(this._destroyEvents([e[b]]),e.splice(b,1)),this;JAX.Report.error("For first argument I expected JAX.Listener instance, string with event type or you can call it without arguments.");
return this};JAX.Event=JAK.ClassMaker.makeClass({NAME:"JAX.Event",VERSION:"1.0"});JAX.Event.prototype.$constructor=function(a){this._e=a};JAX.Event.prototype.event=function(){return this._e};JAX.Event.prototype.prevent=function(){JAK.Events.cancelDef(this._e);return this};JAX.Event.prototype.stop=function(){JAK.Events.stopEvent(this._e);return this};JAX.Event.prototype.target=function(){return JAX(JAK.Events.getTarget(this._e))};JAX.Event.prototype.currentTarget=function(){return JAX(this._e.currentTarget)};
JAX.Event.prototype.type=function(){return this._e.type};JAX.Listener=JAK.ClassMaker.makeClass({NAME:"JAX.Listener",VERSION:"1.0"});JAX.Listener.prototype.$constructor=function(a,b,c,d){this._jaxElm=a;this._type=c;this._method=d;this._id=b};JAX.Listener.prototype.unregister=function(){this._id&&(this._jaxElm.stopListening(this),this._id=null)};JAX.Listener.prototype.node=function(){return this._jaxElm.node()};JAX.Listener.prototype.id=function(){return this._id};JAX.Listener.prototype.type=function(){return this._type};
JAX.JAXNode=JAK.ClassMaker.makeClass({NAME:"JAX.JAXNode",VERSION:"1.0"});JAX.JAXNode.prototype.$constructor=function(){this._node=null;this.jaxNodeType=-1};JAX.JAXNode.prototype.$destructor=function(){};JAX.JAXNode.prototype.node=function(){return this._node};JAX.JAXNode.prototype.exists=function(){return!!this._node};JAX.JAXNode.prototype.find=function(a){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.findAll=function(a){this._showMessage();return new JAX.NodeArray([])};
JAX.JAXNode.prototype.addClass=function(a){this._showMessage();return this};JAX.JAXNode.prototype.removeClass=function(a){this._showMessage();return this};JAX.JAXNode.prototype.hasClass=function(a){this._showMessage();return!1};JAX.JAXNode.prototype.toggleClass=function(a){this._showMessage();return this};JAX.JAXNode.prototype.id=function(a){this._showMessage();return arguments.length?this:""};JAX.JAXNode.prototype.html=function(a){this._showMessage();return arguments.length?this:""};
JAX.JAXNode.prototype.text=function(a){this._showMessage();return arguments.length?this:""};JAX.JAXNode.prototype.add=function(a){this._showMessage();return this};JAX.JAXNode.prototype.addBefore=function(a,b){this._showMessage();return this};JAX.JAXNode.prototype.appendTo=function(a){this._showMessage();return this};JAX.JAXNode.prototype.before=function(a){this._showMessage();return this};JAX.JAXNode.prototype.after=function(a){this._showMessage();return this};
JAX.JAXNode.prototype.insertFirstTo=function(a){this._showMessage();return this};JAX.JAXNode.prototype.replaceWith=function(a){this._showMessage();return this};JAX.JAXNode.prototype.remove=function(){this._showMessage();return this};JAX.JAXNode.prototype.clone=function(a){this._showMessage("JAX.JAXNode.clone");return this};JAX.JAXNode.prototype.listen=function(a,b,c,d){this._showMessage();return new JAX.Listener(this,null,a,f)};JAX.JAXNode.prototype.stopListening=function(a){this._showMessage();return this};
JAX.JAXNode.prototype.prop=function(a,b){this._showMessage();return"string"==typeof a?"":a instanceof Array?{}:this};JAX.JAXNode.prototype.attr=function(a,b){this._showMessage();return"string"==typeof a?"":a instanceof Array?{}:this};JAX.JAXNode.prototype.css=function(a,b){this._showMessage();return"string"==typeof a?"":a instanceof Array?{}:this};JAX.JAXNode.prototype.computedCss=function(a){this._showMessage();return typeof a?"":{}};
JAX.JAXNode.prototype.fullSize=function(a,b){this._showMessage();return 1==arguments.length?0:this};JAX.JAXNode.prototype.size=function(a,b){this._showMessage();return 1==arguments.length?0:this};JAX.JAXNode.prototype.parent=function(){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.next=function(){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.previous=function(){this._showMessage();return new JAX.JAXNode};
JAX.JAXNode.prototype.children=function(a){this._showMessage();return arguments.length?new JAX.JAXNode:new JAX.NodeArray([])};JAX.JAXNode.prototype.first=function(){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.last=function(){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.clear=function(){this._showMessage();return new JAX.JAXNode};JAX.JAXNode.prototype.eq=function(a){this._showMessage();return a&&a instanceof JAX.JAXNode};
JAX.JAXNode.prototype.contains=function(a){this._showMessage();return!1};JAX.JAXNode.prototype.isIn=function(a){this._showMessage();return!1};JAX.JAXNode.prototype.animate=function(a,b,c,d){this._showMessage();return(new JAK.Promise).reject(this._node)};JAX.JAXNode.prototype.fade=function(a,b){this._showMessage();return(new JAK.Promise).reject(this._node)};JAX.JAXNode.prototype.fadeTo=function(a,b){this._showMessage();return(new JAK.Promise).reject(this._node)};
JAX.JAXNode.prototype.slide=function(a,b){this._showMessage();return(new JAK.Promise).reject(this._node)};JAX.JAXNode.prototype._showMessage=function(a){JAX.Report.error("I have bad feeling about this! You are trying to use unsupported method with my node.",this._node)};JAX.Node=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.0",EXTEND:JAX.JAXNode});JAX.Node.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};
JAX.Node.prototype.add=function(a){if(a instanceof JAX.NodeArray)a=a.items();else if("string"==typeof a){var b=document.createElement("div");b.innerHTML=a;var c=b.childNodes.length;a=Array(c);for(var d=0;d<c;d++)a[d]=b.childNodes[d]}else a instanceof Array||(a=[].concat(a));d=0;for(c=a.length;d<c;d++)b=a[d],!b.nodeType&&!b.jaxNodeType||b.jaxNodeType&&1>b.jaxNodeType?JAX.Report.error("For my argument I expected html node, text node, documentFragment or JAX node. You can use also array of them."):(b=
b.jaxNodeType?b.node():b,this._node.appendChild(b));return this};
JAX.Node.prototype.addBefore=function(a,b){if(!a||"object"!=typeof a||!a.nodeType&&!a.jaxNodeType||a.jaxNodeType&&1>a.jaxNodeType)return JAX.Report.error("For first argument I expected html element, text node, documentFragment or JAX node."),this;if(!b||"object"!=typeof b||!b.nodeType&&!b.jaxNodeType||a.jaxNodeType&&1>a.jaxNodeType)return JAX.Report.error("For second argument I expected html element, text node or JAX node."),this;a=a.jaxNodeType?a.node():a;b=b.jaxNodeType?b.node():b;this._node.insertBefore(a,
b);return this};JAX.Node.prototype.appendTo=function(a){a=JAX(a);if(a.exists())return a=a.jaxNodeType?a.node():a,a.appendChild(this._node),this;JAX.Report.error("I could not find given element. For first argument I expected html element, documentFragment or JAX node.");return this};
JAX.Node.prototype.before=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.parentNode.insertBefore(this._node,a),this;JAX.Report.error("I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.Node.prototype.after=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.nextSibling?a.parentNode.insertBefore(this._node,a.nextSibling):a.parentNode.appendChild(this._node),this;JAX.Report.error("I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.Node.prototype.insertFirstTo=function(a){a=JAX(a);if(a.exists()){a=a.node();if(a.childNodes&&a.firstChild)a.insertBefore(this._node,a.firstChild);else if(a.childNodes)a.appendChild(this._node);else throw Error("Given element can not have child nodes.");return this}JAX.Report.error("I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.Node.prototype.replaceWith=function(a){a=JAX(a);if(a.exists())return a=a.node(),this.before(a),a.parentNode.removeChild(a),this;JAX.Report.error("For first argument I expected html element, text node or JAX node.");return this};JAX.Node.prototype.remove=function(){this._node.parentNode.removeChild(this._node);return this};JAX.Node.prototype.clone=function(a){a=this._node.cloneNode(!!a);return new this.constructor(a)};
JAX.Node.prototype.prop=function(a,b){if("string"==typeof a){if(1==arguments.length)return this._node[a];this._node[a]=b;return this}if(a instanceof Array){for(var c={},d=0,g=a.length;d<g;d++){var e=a[d];c[e]=this._node[e]}return c}for(e in a)this._node[e]=a[e];return this};JAX.Node.prototype.parent=function(){return this._node.parentNode?JAX(this._node.parentNode):new JAX.NullNode};JAX.Node.prototype.next=function(){return this._node.nextSibling?JAX(this._node.nextSibling):new JAX.NullNode};
JAX.Node.prototype.previous=function(){return this._node.previousSibling?JAX(this._node.previousSibling):new JAX.NullNode};JAX.Element=JAK.ClassMaker.makeClass({NAME:"JAX.Element",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:JAX.IListening});JAX.Element._events=[];JAX.Element._OPACITY_REGEXP=/alpha\(opacity=['"]?([0-9]+)['"]?\)/i;JAX.Element._BOX_SIZING=null;
(function(){var a={boxSizing:"box-sizing",mozBoxSizing:"-moz-box-sizing",WebkitBoxSizing:"-webkit-box-sizing"},b=document.createElement("div"),c;for(c in a)if(c in b.style){JAX.Element._BOX_SIZING=a[c];break}})();JAX.Element.prototype.$constructor=function(a){this.$super(a)};JAX.Element.prototype.$destructor=function(){this.stopListening();this._node=null};JAX.Element.prototype.find=function(a){return JAX(a,this._node)};JAX.Element.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Element.prototype.addClass=function(a){"string"!=typeof a&&(a+="",JAX.Report.error("Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.add(a[b]);return this};JAX.Element.prototype.removeClass=function(a){"string"!=typeof a&&(a+="",JAX.Report.error("Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.remove(a[b]);return this};
JAX.Element.prototype.hasClass=function(a){"string"!=typeof a&&(a+="",JAX.Report.error("For my argument I expected string.",this._node));if(""==a)return!1;for(a=a.split(" ");a.length;){var b=a.shift();if(!this._node.classList.contains(b))return!1}return!0};JAX.Element.prototype.toggleClass=function(a){"string"!=typeof a&&(a+="",JAX.Report.error("For my argument I expected string.",this._node));this._node.classList.toggle(a);return this};
JAX.Element.prototype.id=function(a){if(!arguments.length)return this.attr("id");"string"!=typeof a&&(a+="",JAX.Report.error("For my argument I expected string.",this._node));this.attr({id:a});return this};JAX.Element.prototype.html=function(a){if(!arguments.length)return this._node.innerHTML;"string"!=typeof a&&"number"!=typeof a&&JAX.Report.error("For my argument I expected string or number.",this._node);this._node.innerHTML=a+"";return this};
JAX.Element.prototype.text=function(a){"string"!=typeof innerHTML&&"number"!=typeof innerHTML&&JAX.Report.error("For my argument I expected string or number.",this._node);if(!arguments.length&&"innerHTML"in this._node)return this._getText(this._node);"innerHTML"in this._node&&(this.clear(),this._node.appendChild(this._node.ownerDocument.createTextNode(a+"")));return this};
JAX.Element.prototype.attr=function(a,b){if("string"==typeof a){if(1==arguments.length)return this._node.getAttribute(a);this._node.setAttribute(a,b+"");return this}if(a instanceof Array){for(var c={},d=0,g=a.length;d<g;d++){var e=a[d];c[e]=this._node.getAttribute(e)}return c}for(e in a)this._node.setAttribute(e,a[e]);return this};
JAX.Element.prototype.css=function(a,b){if("string"==typeof a){if(1==arguments.length)return"opacity"==a?this._getOpacity():this._node.style[a];this._node.style[a]=b;return this}if(a instanceof Array){for(var c={},d=0,g=a.length;d<g;d++){var e=a[d];c[e]="opacity"==e?this._getOpacity():this._node.style[e]}return c}for(e in a)b=a[e],"opacity"==e?this._setOpacity(b):this._node.style[e]=b;return this};
JAX.Element.prototype.computedCss=function(a){if("string"==typeof a){var b=JAX.Element.getComputedStyle(this._node).getPropertyValue(a);return b}for(var c={},d=0,g=a.length;d<g;d++){var e=a[d],b=JAX.Element.getComputedStyle(this._node).getPropertyValue(e);c[e]=b}return c};
JAX.Element.prototype.fullSize=function(a,b){if(1==arguments.length){var c=this.css("display"),d="width"==a?this._node.offsetWidth:this._node.offsetHeight;this.css("display",c);return d}b=this._getSizeWithBoxSizing(a,b);this._node.style[a]=Math.max(b,0)+"px";return this};
JAX.Element.prototype.size=function(a,b){if(1==arguments.length){var c=parseInt(this.computedCss(a),10);if(isFinite(c))return c;var d=this.css("display");0==d.indexOf("none")&&this.css("display","");c=this._getSizeWithBoxSizing(a);this.css("display",d);return c}b=parseInt(b,10);this._node.style[a]=Math.max(b,0)+"px";return this};
JAX.Element.prototype.children=function(a){if(!arguments.length){for(var b=[],c=0,d=this._node.childNodes.length;c<d;c++)b.push(JAX(this._node.childNodes[c]));return new JAX.NodeArray(b)}return(b=this._node.childNodes[a])?JAX(b):new JAX.NullNode};
JAX.Element.prototype.first=function(){if("firstElementChild"in this._node)return this._node.firstElementChild?JAX(this._node.firstElementChild):new JAX.NullNode;if(!this._node.childNodes||!this._node.childNodes.length)return new JAX.NullNode;for(var a=0,b=this._node.childNodes.length;a<b;a++){var c=this._node.childNodes[a];if(1==c.nodeType)return JAX(c)}return new JAX.NullNode};
JAX.Element.prototype.last=function(){if("lastElementChild"in this._node)return this._node.lastElementChild?JAX(this._node.lastElementChild):new JAX.NullNode;if(!this._node.childNodes||!this._node.childNodes.length)return new JAX.NullNode;for(var a=this._node.childNodes.length-1;-1<a;a--){var b=this._node.childNodes[a];if(1==b.nodeType)return JAX(b)}return new JAX.NullNode};JAX.Element.prototype.clear=function(){"innerHTML"in this._node&&JAK.DOM.clear(this._node);return this};
JAX.Element.prototype.eq=function(a){return!a?!1:"object"==typeof a&&(a.nodeType||a.jaxNodeType)?(a.jaxNodeType?a.node():a)===this._node:"string"==typeof a?/^[a-zA-Z0-9]+$/g.test(a)?!!(this._node.tagName&&this._node.tagName.toLowerCase()==a):!!this.parent().findAll(a).filterItems(function(a){return a.eq(this._node)},this).length:!1};
JAX.Element.prototype.contains=function(a){if(!a)return!1;if("object"==typeof a&&(a.nodeType||a.jaxNodeType)){for(a=a.jaxNodeType?a.parent().node():a.parentNode;a;){if(a==this._node)return!0;a=a.parentNode}return!1}if("string"==typeof a)return!!this.find(a);JAX.Report.error("For first argument I expected html element, text node, string with CSS3 compatible selector or JAX node.");return!1};
JAX.Element.prototype.isIn=function(a){if(!a)return!1;if("object"==typeof a&&(a.nodeType||a.jaxNodeType))return a=a.jaxNodeType?a:JAX(a),a.exists()?a.contains(this):!1;if("string"==typeof a){if(/^[a-zA-Z0-9]+$/g.test(a)){var b=this._node;for(a=a.toLowerCase();b=b.parentNode;)if(b.tagName&&b.tagName.toLowerCase()==a)return!0;return!1}return!!JAX.all(a).filterItems(function(a){return a.contains(this._node)}.bind(this)).length}JAX.Report.error("For first argument I expected html element or JAX node.");
return!1};JAX.Element.prototype.animate=function(a,b,c,d){"string"!=typeof a&&(type+="",JAX.Report.error("For first argument I expected string.",this._node));var g=new JAX.FX(this);g.addProperty(a,b,c,d);return g.run()};
JAX.Element.prototype.fade=function(a,b){"string"!=typeof a&&(a+="",JAX.Report.error("For first argument I expected string.",this._node));switch(a){case "in":return this.animate("opacity",b,0,1);case "out":return this.animate("opacity",b,1,0);default:return JAX.Report.error("I got unsupported type '"+a+"'.",this._node),(new JAK.Promise).reject(this._node)}};
JAX.Element.prototype.fadeTo=function(a,b){a=parseFloat(a)||0;0>a&&(a=0,JAX.Report.error("For first argument I expected positive number, but I got negative. I set zero value.",this._node));return this.animate("opacity",b,null,a)};
JAX.Element.prototype.slide=function(a,b){"string"!=typeof a&&(a+="",JAX.Report.error("For first argument I expected string.",this._node));var c={};switch(a){case "down":var c=this.css(["overflow","height"]),d="height",g=0,e=null;break;case "up":d="height";g=null;e=0;break;case "left":d="width";g=null;e=0;break;case "right":c=this.css(["overflow","width"]);d="width";g=0;e=null;break;default:return JAX.Report.error("I got unsupported type '"+a+"'.",this._node),this}this.css("overflow","hidden");var h=
function(){this.css(c)}.bind(this),d=this.animate(d,b,g,e);d.then(h);return d};JAX.Element.prototype._setOpacity=function(a){var b="";"ie"==JAK.Browser.client&&9>JAK.Browser.version?(b="filter",a=Math.round(100*a),a="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+");"):b="opacity";this._node.style[b]=a+""};
JAX.Element.prototype._getOpacity=function(){if("ie"==JAK.Browser.client&&9>JAK.Browser.version){var a="";this._node.style.filter.replace(JAX.NODE.OPACITY_REGEXP,function(b,c){a=c});return a?parseInt(a,10)/100+"":a}return this._node.style.opacity};
JAX.Element.prototype._getSizeWithBoxSizing=function(a,b){var c=JAX.Node._BOX_SIZING?this.computedCss(JAX.Node._BOX_SIZING):null,d=0,g=0,e=0,h=0,r="padding-"+("width"==a?"left":"top"),k="padding-"+("width"==a?"right":"bottom"),n="border-"+("width"==a?"left":"top"),t="border-"+("width"==a?"right":"bottom");1==arguments.length&&(b="width"==a?this._node.offsetWidth:this._node.offsetHeight);if(!c||"content-box"==c)d=parseFloat(this.computedCss(r)),g=parseFloat(this.computedCss(k));"border-box"!=c&&(e=
parseFloat(this.computedCss(n)),h=parseFloat(this.computedCss(t)));d&&isFinite(d)&&(b-=d);g&&isFinite(g)&&(b-=g);e&&isFinite(e)&&(b-=e);h&&isFinite(h)&&(b-=h);return b};JAX.Element.prototype._getText=function(a){for(var b="",c=0,d=a.childNodes.length;c<d;c++)var g=a.childNodes[c],e=g.tagName?g.tagName.toLowerCase():"",b=g.childNodes&&g.childNodes.length?b+this._getText(g):"br"==e?b+"\n":g.nodeValue?b+g.nodeValue:b+" ";return b};
JAX.Element.prototype._destroyEvents=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].id();JAK.Events.removeListener(d)}};
(function(){if(window.getComputedStyle)JAX.Element.getComputedStyle=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,"")};else{var a=function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})},b=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},c=function(a){if(!a)return 16;var b=a.currentStyle.fontSize,d=parseFloat(b),b=b.split(/\d/)[0];return/%|em/.test(b)?c(a.parentElement):g(d,b)},d=function(a,b,c,d){c=b.boxSizing;var e=0,
g=0,l=0,m=0,p="padding"+("width"==a?"Left":"Top"),u="padding"+("width"==a?"Right":"Bottom"),q="border"+("width"==a?"LeftWidth":"Top");a="border"+("width"==a?"RightWidth":"Bottom");if(!c||"content-box"==c)e=parseFloat(b[p]),g=parseFloat(b[u]);"border-box"!=c&&(l=parseFloat(b[q]),m=parseFloat(b[a]));e&&isFinite(e)&&(d-=e);g&&isFinite(g)&&(d-=g);l&&isFinite(l)&&(d-=l);m&&isFinite(m)&&(d-=m);return d},g=function(a,b,c,d){switch(b){case "em":return a*d;case "in":return 96*a;case "pt":return 96*a/72;case "pc":return 1152*
a/72;case "cm":return 37.7952*a;case "mm":return 37.7952*a/10;case "%":return a/100*c;default:return a}},e=function(a){var e=a.currentStyle,k=c(a),n=0;for(property in e){this[n]=b(property);if(/margin.|padding.|border.+W|^fontSize$/.test(property)&&"auto"!=e[property]){var t=property,s,l=a,m=property;s=k;var p=e[m],u=parseFloat(p),p=p.split(/\d/)[0];if("fontSize"==m)l=s;else if(l.parentElement!=l.ownerDocument){var m=l.parentElement,q=document.createElement("jaxtemp");q.style.display="block";m.appendChild(q);
l=q.offsetWidth;m.removeChild(q)}else l=l.parentElement.documentElement.clientWidth;s=g(u,p,l,s);this[t]=s+"px"}else if("styleFloat"==property)this["float"]=e[property];else if(-1!=["left","right","top","bottom"].indexOf(property)&&-1!=["absolute","relative","fixed"].indexOf(e.position)&&"auto"!=e[property]){t=property;m=a;p=property;s=k;l=e[p];u=parseFloat(l);l=l.split(/\d/)[0];q=0;a:{for(p="left"==p||"right"==p?"clientWidth":"clientHeight";m.parentElement&&m.parentElement.currentStyle;)if(m=m.parentElement,
-1!=["absolute","relative","fixed"].indexOf(m.currentStyle.position||"")){q=m[p];break a}q=m.ownerDocument.documentElement[p]}s=g(u,l,q,s);this[t]=s+"px"}else this[property]=e[property];n++}this.length=n;this.width=-1!=e.width.indexOf("px")?e.width:d("width",this,k,a.offsetWidth)+"px";this.height=-1!=e.height.indexOf("px")?e.height:d("height",this,k,a.offsetHeight)+"px"};e.prototype.getPropertyPriority=function(){throw Error("NotSupportedError: DOM Exception 9");};e.prototype.getPropertyValue=function(b){return this[a(b)]||
""};e.prototype.item=function(a){return this[a]};e.prototype.removeProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};e.prototype.setProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};e.prototype.getPropertyCSSValue=function(){throw Error("NotSupportedError: DOM Exception 9");};JAX.Element.getComputedStyle=function(a){return new e(a)}}})();JAX.TextNode=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.0",EXTEND:JAX.Node});
JAX.TextNode.prototype.$constructor=function(a){this.$super(a)};JAX.TextNode.prototype.text=function(a){if(!arguments.length)return this._node.nodeValue;this._node.nodeValue=a;return this};JAX.TextNode.prototype.clear=function(){this._node.nodeValue="";return this};JAX.TextNode.prototype.eq=function(a){return!a?!1:(a.jaxNodeType?a.node():a)==this._node};JAX.TextNode.prototype.add=function(a){this._showMessage();return this};JAX.TextNode.prototype.addBefore=function(a,b){this._showMessage();return this};
JAX.DocumentNode=JAK.ClassMaker.makeClass({NAME:"JAX.DocumentNode",VERSION:"1.0",EXTEND:JAX.JAXNode,IMPLEMENT:JAX.IListening});JAX.DocumentNode.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};JAX.DocumentNode.prototype.find=function(a){return JAX(a,this._node)};JAX.DocumentNode.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.DocumentNode.prototype.size=function(a){if(1<arguments.length)return JAX.Report.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this;switch(a){case "width":return document.documentElement.clientWidth;case "height":return document.documentElement.clientHeight;default:return JAX.Report.error("You gave me an unsupported size type. I expected 'width' or 'height'.",this._node),0}};
JAX.DocumentNode.prototype.fullSize=function(a){return 1<arguments.length?(JAX.Report.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this):this.size(a)};JAX.DocumentFragmentNode=JAK.ClassMaker.makeClass({NAME:"JAX.DocumentFragmentNode",VERSION:"1.0",EXTEND:JAX.Node});JAX.DocumentFragmentNode.prototype.$constructor=function(a){this.$super(a)};JAX.DocumentFragmentNode.prototype.find=function(a){return JAX(a,this._node)};
JAX.DocumentFragmentNode.prototype.findAll=function(a){return JAX.all(a,this._node)};JAX.DocumentFragmentNode.prototype.remove=function(){this._showMessage();return this};JAX.NullNode=JAK.ClassMaker.makeClass({NAME:"JAX.NullNode",VERSION:"1.0",EXTEND:JAX.JAXNode});JAX.NullNode.prototype.$constructor=function(){this._node=null;this.jaxNodeType=-1};JAX.NullNode.prototype._showMessage=function(a){JAX.Report.error("Hello! I am null node. It means you are trying to work with not existing node. Be careful what you do. Try to use JAX.Node.exists method for checking if element is found.")};
JAX.NodeArray=JAK.ClassMaker.makeClass({NAME:"JAX.NodeArray",VERSION:"1.02"});JAX.NodeArray.prototype.$constructor=function(a){a=a?[].concat(a):[];var b=a.length;this._jaxNodes=[];for(var c=0;c<b;c++){var d=a[c];if("object"==typeof d&&d.nodeType)this._jaxNodes.push(JAX(d));else if(d.jaxNodeType&&d.exists())this._jaxNodes.push(d);else throw Error("First argument must be array of JAX.Node instances or html nodes");}this.length=b};JAX.NodeArray.prototype.item=function(a){return this._jaxNodes[a||0]};
JAX.NodeArray.prototype.items=function(a,b){if(!arguments.length)return this._jaxNodes.slice();b=b||this._jaxNodes.length;return this._jaxNodes.slice(a||0,b)};JAX.NodeArray.prototype.addClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].addClass(a);return this};JAX.NodeArray.prototype.haveClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].hasClass(a))return!1;return!0};
JAX.NodeArray.prototype.toggleClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].toggleClass(a);return this};JAX.NodeArray.prototype.removeClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].removeClass(a);return this};JAX.NodeArray.prototype.attr=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].attr(a,b);return this};
JAX.NodeArray.prototype.css=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].css(a,b);return this};JAX.NodeArray.prototype.prop=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].prop(a,b);return this};JAX.NodeArray.prototype.appendTo=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].appendTo(a);return this};
JAX.NodeArray.prototype.remove=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].removeFromDOM();return this};JAX.NodeArray.prototype.areIn=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].isIn(a))return!1;return!0};JAX.NodeArray.prototype.destroyNodes=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].$destructor();this._jaxNodes=[]};
JAX.NodeArray.prototype.listen=function(a,b,c,d){for(var g=this._jaxNodes.length,e=Array(g),h=0;h<g;h++)e[h]=this._jaxNodes[h].listen(a,b,c,d);return e};JAX.NodeArray.prototype.stopListening=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].stopListening(a);return this};JAX.NodeArray.prototype.forEachItem=function(a,b){this._jaxNodes.forEach(a,b||this);return this};JAX.NodeArray.prototype.filterItems=function(a,b){var c=this._jaxNodes.filter(a,b||this);return new JAX.NodeArray(c)};
JAX.NodeArray.prototype.firstItem=function(){return this._jaxNodes[0]};JAX.NodeArray.prototype.lastItem=function(){return this._jaxNodes[this.length-1]};JAX.NodeArray.prototype.pushItem=function(a){a=JAX(a);this.length++;this._jaxNodes.push(a);return this};JAX.NodeArray.prototype.popItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.pop()};JAX.NodeArray.prototype.shiftItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.shift()};
JAX.NodeArray.prototype.unshiftItem=function(a){a=JAX(a);this.length++;this._jaxNodes.unshift(a);return this};JAX.NodeArray.prototype.animate=function(a,b,c,d){for(var g=Array(this._jaxNodes.length),e=0,h=this._jaxNodes.length;e<h;e++)g[e]=this._jaxNodes[e].animate(a,b,c,d);return JAK.Promise.when(g)};JAX.NodeArray.prototype.fade=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,g=this._jaxNodes.length;d<g;d++)c[d]=this._jaxNodes[d].fade(a,b);return JAK.Promise.when(c)};
JAX.NodeArray.prototype.fadeTo=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,g=this._jaxNodes.length;d<g;d++)c[d]=this._jaxNodes[d].fadeTo(a,b);return JAK.Promise.when(c)};JAX.NodeArray.prototype.slide=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,g=this._jaxNodes.length;d<g;d++)c[d]=this._jaxNodes[d].slide(a,b);return JAK.Promise.when(c)};JAX.FX=JAK.ClassMaker.makeClass({NAME:"JAX.FX",VERSION:"1.05",DEPEND:[{sClass:JAK.CSSInterpolator,ver:"2.1"}]});
JAX.FX._TRANSITION_PROPERTY="";JAX.FX._TRANSITION_EVENT="";(function(){var a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MSTransition:"MSTransitionEnd"},b;for(b in a)if(b in document.createElement("div").style){JAX.FX._TRANSITION_PROPERTY=b;JAX.FX._TRANSITION_EVENT=a[b];break}})();
JAX.FX._SUPPORTED_PROPERTIES={width:{defaultUnit:"px",css:"width"},height:{defaultUnit:"px",css:"height"},top:{defaultUnit:"px",css:"top"},left:{defaultUnit:"px",css:"left"},bottom:{defaultUnit:"px",css:"bottom"},right:{defaultUnit:"px",css:"right"},fontSize:{defaultUnit:"px",css:"font-size"},opacity:{defaultUnit:"",css:"opacity"},color:{defaultUnit:"",css:"color"},backgroundColor:{defaultUnit:"",css:"background-color"}};JAX.FX._SUPPORTED_METHODS="ease linear ease-in ease-out ease-in-out cubic-bezier".split(" ");
JAX.FX.prototype.$constructor=function(a){this._elm=JAX(a);if(!this._elm.node())throw Error("I can not continue because I got null node. Check your code. please.");this._settings=[];this._reversed=!1;this._durationPassed=0;this._durationIntervalChecker=null;this._interpolators=[];this._transitionCount=0;this._running=!1;this._transitionSupport=!!JAX.FX._TRANSITION_PROPERTY};
JAX.FX.prototype.addProperty=function(a,b,c,d,g){var e=this._parseValue(b);b=this._parseUnit(b)||"ms";g=this._transitionSupport?g||"linear":"LINEAR";if("string"!=typeof a)throw Error("For first argument I expected string");if(!isFinite(e)||0>e)throw Error("For second argument I expected positive number");if(c&&"string"!=typeof c&&("number"!=typeof c||!isFinite(c)))throw Error("For third argument I expected string, number or null for automatic checking");if(d&&"string"!=typeof d&&("number"!=typeof d||
!isFinite(d)))throw Error("For fourth argument I expected string or number");if(null==c&&null==d)throw Error("At least one of start and end values must be defined.");if("string"!=typeof g)throw Error("For fifth argument I expected string");this._checkSupportedProperty(a);this._checkSupportedMethod(g);d=d||"number"==typeof d&&isFinite(d)?this._parseCSSValue(a,d):this._foundCSSValue(a);c=c||"number"==typeof c&&isFinite(c)?this._parseCSSValue(a,c):this._foundCSSValue(a);this._settings.push({property:a,
cssStart:c,cssEnd:d,duration:"ms"==b?e:1E3*e,durationUnit:"ms",method:g});return this};JAX.FX.prototype.run=function(){this.isRunning()&&this.stop();this._running=!0;this._promise=new JAK.Promise;this._transitionSupport?this._initTransition(this._settings):this._initInterpolators(this._settings);this._durationPassed=0;this._durationIntervalChecker=setInterval(function(){this._durationPassed+=100}.bind(this),100);return this._promise};
JAX.FX.prototype.reverse=function(){this.isRunning()&&this.stop();this._reversed=!this._reversed;for(var a=[],b=0,c=this._settings.length;b<c;b++){var d=this._settings[b],g=d.property,e=d.method,h=d.durationUnit,r=this._durationPassed;if(this._reversed)var d=d.cssStart,k=this._parseCSSValue(g,this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[g].css));else d=d.cssEnd,k=this._parseCSSValue(g,this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[g].css));a.push({property:g,cssStart:k,cssEnd:d,duration:r,
durationUnit:h,method:e})}this._running=!0;this._promise=new JAK.Promise;this._transitionSupport?this._initTransition(a):this._initInterpolators(a);this._durationPassed=0;this._durationIntervalChecker=setInterval(function(){this._durationPassed+=100}.bind(this),100);return this._promise};JAX.FX.prototype.isRunning=function(){return this._running};JAX.FX.prototype.stop=function(){if(!this._transitionSupport)return this._stopInterpolators(),this;this._stopTransition();return this};
JAX.FX.prototype._checkSupportedProperty=function(a){if(!(a in JAX.FX._SUPPORTED_PROPERTIES)){a=[];for(var b in JAX.FX._SUPPORTED_PROPERTIES)a.push(JAX.FX._SUPPORTED_PROPERTIES[b]);throw Error("First argument must be supported setting: "+a.join(", "));}};
JAX.FX.prototype._checkSupportedMethod=function(a){a=a.toLowerCase();if(!(-1<JAX.FX._SUPPORTED_METHODS.indexOf(a)||0==a.indexOf("cubic-bezier"))){a=[];for(var b in JAX.FX._SUPPORTED_METHODS)a.concat(JAX.FX._SUPPORTED_METHODS[b]);throw Error("Fifth argument must be supported method: "+a.join(", "));}};
JAX.FX.prototype._initInterpolators=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],g=d.duration,g=new JAK.CSSInterpolator(this._elm.node(),g,{interpolation:d.method,endCallback:this._finishInterpolatorAnimation.bind(this,b)});this._interpolators.push(g);-1!=["backgroundColor","color"].indexOf(d.property)?g.addColorProperty(d.property,d.cssStart.value,d.cssEnd.value):g.addProperty(d.property,d.cssStart.value,d.cssEnd.value,d.cssStart.unit);g.start()}};
JAX.FX.prototype._stopInterpolators=function(){for(var a=0,b=this._interpolators.length;a<b;a++)this._endInterpolator(a);this._promise.reject(this._elm)};
JAX.FX.prototype._initTransition=function(a){for(var b=JAX.FX._TRANSITION_PROPERTY,c=JAX.FX._TRANSITION_EVENT,d=[],g=this._elm.node(),e=g.style,h=0,r=a.length;h<r;h++){var k=a[h],n=JAX.FX._SUPPORTED_PROPERTIES[k.property].css+" "+k.duration+k.durationUnit+" "+k.method;e[k.property]=k.cssStart.value+k.cssStart.unit;d.push(n);this._transitionCount++}setTimeout(function(){g.style[b]=d.join(",");this._ecTransition=this._elm.listen(c,this,"_finishTransitionAnimation");for(var h=0,k=a.length;h<k;h++){var l=
a[h];e[l.property]=l.cssEnd.value+l.cssStart.unit}}.bind(this),0)};JAX.FX.prototype._stopTransition=function(){for(var a=this._elm.node(),b=this._elm.node().style,c=0,d=this._settings.length;c<d;c++){var g=this._settings[c].property,e=window.getComputedStyle(a).getPropertyValue(JAX.FX._SUPPORTED_PROPERTIES[g].css);b[g]=e}for(;this._transitionCount;)this._endTransition();this._finishAnimation()};
JAX.FX.prototype._parseCSSValue=function(a,b){var c=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;if("backgroundColor"==a||"color"==a)var d=b;else d=this._parseValue(b),c=this._parseUnit(b)||c;return{value:d,unit:c}};JAX.FX.prototype._parseValue=function(a){return parseFloat(a)};JAX.FX.prototype._parseUnit=function(a){var b=parseFloat(a);return(a+"").replace(b,"")};
JAX.FX.prototype._foundCSSValue=function(a){var b=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;switch(a){case "width":case "height":a=this._elm.size(a);break;case "backgroundColor":case "color":a=this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[a].css);break;default:a=this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[a].css),a=parseFloat(a)}return{value:a,unit:b}};JAX.FX.prototype._finishTransitionAnimation=function(){this._endTransition();this._finishAnimation(!0)};
JAX.FX.prototype._finishInterpolatorAnimation=function(a){this._endInterpolator(a);this._finishAnimation(!0)};JAX.FX.prototype._endInterpolator=function(a){this._interpolators[a].stop();this._interpolators[a]=null;a=0;for(var b=this._interpolators.length;a<b;a++)if(this._interpolators[a])return;this._interpolators=[];this._running=!1};
JAX.FX.prototype._endTransition=function(){this._transitionCount--;this._transitionCount||(this._elm.stopListening(this._ecTransition),this._elm.node().style[JAX.FX._TRANSITION_PROPERTY]="",this._ecTransition=null,this._running=!1)};JAX.FX.prototype._finishAnimation=function(a){clearInterval(this._durationIntervalChecker);a?this._promise.fulfill(this._elm):this._promise.reject(this._elm)};JAX.Report=JAK.ClassMaker.makeStatic({NAME:"JAX.Report",VERSION:"1.0"});
JAX.Report.error=function(a,b){console.error&&(console.error("[::JAX::] Found error \u00bb\u00bb\u00bb "+a+" I will continue but my doing is unstable!"),b&&console.log("[::JAX::] Problem node \u00bb\u00bb\u00bb ",b))};
